{% load utils_extras %}
{% load available_extras %}
{% if not display_only_list %}
<h1>{% trans "books box"|capfirst %}</h1>
    <p>
    {% if perms.library.book_new %}
    <a class="pure-button pure-button-success" href="{% url "book_box_new" %}">{% trans "new book"|capfirst %}</a> 
    {% endif %}
    <span class="right_buttons"><span class="pure-button pure-button-primary"><a href="?sort_by=title&order=asc" class="fa fa-sort-asc"></a> 
        {% trans "title"|capfirst %} 
        <a href="?sort_by=title&order=desc" class="fa fa-sort-desc"></a></span>
    <span class="pure-button pure-button-primary"><a href="?sort_by=author__lastname&order=asc" class="fa fa-sort-asc"></a> 
        {% trans "author"|capfirst %}
        <a href="?sort_by=author__lastname&order=desc" class="fa fa-sort-desc"></a></span>
    <span class="pure-button pure-button-primary"><a href="?sort_by=editor__name&order=asc" class="fa fa-sort-asc"></a> 
        {% trans "editor"|capfirst %}
        <a href="?sort_by=editor__name&order=desc" class="fa fa-sort-desc"></a></span>
    <span class="pure-button pure-button-primary"><a href="?sort_by=publishing_date&order=asc" class="fa fa-sort-asc"></a> 
        {% trans "published"|capfirst %}
        <a href="?sort_by=publishing_date&order=desc" class="fa fa-sort-desc"></a></span>
    </p>
{% endif %}
{% for book in books %}
    {% if opinions|keyvalue:book.id %}
        {% with rating_user=opinions|keyvalue:book.id %}     
            {% include "library/box_one_book.html" %}
        {% endwith %}
    {% else %}
        {% include "library/box_one_book.html" %}
    {% endif %}
{% empty %}
    <p>{% trans "no book in this box !"|capfirst %}</p>
{% endfor %}
<div style="clear: both;"></div>
{% if not display_only_list %}
    {% include "common/pagination.html" %}
    {% if perms.library.book_new %}
    <a class="pure-button pure-button-success" href="{% url "book_box_new" %}">{% trans "new book"|capfirst %}</a> 
    {% endif %}
{% endif %}